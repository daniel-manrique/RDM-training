---
title: "Organizing research data for management and sharing"
author: 
  - name: Daniel Manrique-Castano, Ph.D
    email: daniel.manrique-castano@alliancecan.ca
    affiliations:
      - name: Digital Research Alliance of Canada

date: last-modified
date-format: full

format: 
  html:
    embed-resources: true
    mermaid:
      theme: forest
      
  revealjs:
    footer: "Organizing research data - Daniel Manrique-Castano, Ph.D"
    logo: alliance_logo.png
    theme: white
    transition: fade
    slide-number: true
    show-slide-number: all
    preview-links: auto
    mermaid:
      theme: forest
      mermaid-format: svg
    
filters:
  - reveal-auto-agenda
auto-agenda:
  bullets: numbered
  heading: Agenda
  
  gfm:
    mermaid-format: svg

css: styles.css
bibliography: references.bib 
---

# Basic principles for organizing research data

## Understanding a dataset

::::: {layout-ncol="2"}
:::: {#first-column}
Research data comes in many tastes and shapes ([tables]{style="color:orange;"}, [images]{style="color:magenta;"}, [videos]{style="color:red;"}, [text]{style="color:gray;"}).

Whatever the case, the [structure]{style="color:green;"} of the data must be [understandable]{style="color:green;"} by others than the author.
::::

:::: {#second-column}
::: {style="text-align: center; font-size: 70%"}
![Most of the time others do not understand data](images/DificultData.webp){fig-align="center" width="500" height="500"}
:::
::::
:::::

## Best practices for organizing a dataset {.smaller}

1.  Use consistent [naming conventions]{style="color:green;"} that fairly describe the content and allow interrelation between files:

-   {{< bi card-image>}} [A1.tif]{style="color:red;"} {{< bi arrow-right>}} [Exp_MouseID_Day_Condition_Marker.tif]{style="color:green;"}
-   {{< bi file-earmark-spreadsheet>}} [CellsTable.xls]{style="color:red;"} {{< bi arrow-right>}} [Widefield_5x_Cortex_NeuN_Counts.csv]{style="color:green;"}

2.  Use [proper, accessible]{style="color:green;"} file formats to improve accesibility:

-   {{< bi card-image>}} [.tif]{style="color:green;"} for images (preserve the metadata).
-   {{< bi file-earmark-spreadsheet>}} [.csv]{style="color:green;"} for tables (non-proprietary).
-   {{< bi file-bar-graph-fill>}} [.png or .svg]{style="color:green;"} for graphs (preserves quality).
-   {{< bi file-earmark-pdf-fill>}} [.txt or .pdf]{style="color:green;"} for documentation (non-proprietary).

## Best practices for organizing a dataset

3.  Use [comprehensive metadata]{style="color:green;"} (readme/codebook) to describe and contextualize the data.

4.  Implement [coding pipelines]{style="color:green;"} (R, Python) to transform the [raw data]{style="color:red;"} into [analysis data]{style="color:magenta;"} to extract information and analyze it.

::: callout-tip
At the end, your dataset must be composed by organized, clean, and validated data.
:::

# Working with tabular data

## {{< bi file-earmark-spreadsheet>}} Data tables are the core of scientific data {.center}

Despite being the most common file type (.xls) for recording/storing data, tables are the most [poorly organized and unusable]{style="color:red;"} objects in research.

::::: {layout-ncol="2"}

:::: {#first-column}
::: {style="text-align: center;font-size: 50%"}
![from https://dansteer.wordpress.com/](images/BadTable1.webp){fig-align="center" width="400" height="200"}
:::
::::

:::: {#second-column}
::: {style="text-align: center;font-size: 50%"}
![from https://dansteer.wordpress.com/](images/BadTable1.webp){fig-align="center" width="400" height="200"}
:::
::::
:::::

## Examples from published research{.center}

::::: {layout-ncol="2"}

:::: {#first-column}
::: {style="text-align: center;font-size: 50%"}
![Zhao et al. (2024). Nature Comm. DOI: 10.1038/s41467-024-50836-6](images/BadTable2_Zhao(2024)_NatureComm.png){fig-align="center" width="400" height="400"}
:::
::::

:::: {#second-column}
::: {style="text-align: center;font-size: 50%"}
![Balinda et al. (2024). Nature Comm. DOI: doi.org/10.1038/s41467-024-50558-9](images/BadTable2_Balinda(2024)_NatureComm.png){fig-align="center" width="400" height="400"}
:::
::::
:::::

## Examples from Crystal Lewis (2024) {.center}

::::: {layout-ncol="2"}

:::: {#first-column}
::: {style="text-align: center;font-size: 50%"}
![Lewis (2024). DOI: 10.1201/9781032622835-3](images/Lewis_fig3-3.PNG)

![Lewis (2024). DOI: 10.1201/9781032622835-3](images/Lewis_fig3-4.PNG)
:::
::::

:::: {#second-column}
::: {style="text-align: center;font-size: 50%"}
![Lewis (2024). DOI: 10.1201/9781032622835-3](images/Lewis_fig3-5.PNG)

![Lewis (2024). DOI: 10.1201/9781032622835-3](images/Lewis_fig3-6.PNG)
:::
::::
:::::

## Examples from Crystal Lewis (2024)



::: {style="text-align: center;font-size: 50%"}
![Lewis (2024). DOI: 10.1201/9781032622835-3](images/Lewis_fig3-7.PNG){fig-align="center" width="500" height="200"}
:::

::: {style="text-align: center;font-size: 50%"}
![Lewis (2024). DOI: 10.1201/9781032622835-3](images/Lewis_fig3-8.PNG){fig-align="center" width="600" height="200"}
:::


## {{< bi file-earmark-spreadsheet>}} Featuring a data table{.center} 

::::: {layout-ncol="2" layout-valign="center"}

:::: {#first-column}
::: {style="text-align: center;font-size: 60%"} 
![A typical long-format data table](images/GoodTable.png){fig-align="left" width="500" height="300"}
:::
::::

:::: {#second-column}
::: {style="text-align: center;font-size: 60%"}
### Columns
- {{< bi dropbox>}} [Variables collected]{style="color:green;"} with an instrument/software: intensity, area, number of cells, etc.
- {{< bi device-ssd-fill>}} [Variables created:]{style="color:green;"} proportions, ratios, etc.
- {{< bi calculator-fill>}} [Summary variables:]{style="color:green;"} sum scores, means, sd, etc. (Not in the same table)
- {{< bi file-earmark-person-fill>}} [Identifier variables]{style="color:green;"} that you create to identify your samples (animal ID, Time point, condition).

### Rows

- {{< bi clipboard-data-fill>}} [Variable values]{style="color:green;"}: original or codified numeric or categorical entries for each column.

:::
::::
:::::

## {{< bi file-earmark-spreadsheet>}} Wide and long table formats{.center}

::::: {layout-ncol="2" layout-valign="center"}

:::: {#first-column}
::: {style="text-align: center;font-size: 60%"} 
![A typical wide-format data table, from Lewis (2024). DOI: 10.1201/9781032622835-3](images/Lewis_fig3-14.PNG){fig-align="left" width="600" height="350"}
:::
::::

:::: {#second-column}
::: {style="text-align: left;font-size: 80%"} 
In a table with [wide format]{style="color:green;"} {{< bi file-earmark-person-fill>}} [Each subject]{style="text-decoration: underline;"} occupies a [single row]{style="color:green;"} and has its associated variables in different columns:[subject]{style="color:orange;"}, [Id1, Id2,]{style="color:red;"}, [Var1, Var2]{style="color:gray;"} [Time 1, Time2, Time3]{style="color:magenta;"}.
:::

::: callout-tip
This format is useful when different columns are [predictors]{style="color:green;"} (in a regression {{< bi bar-chart-line-fill>}}) of another set of columns. Example:   

[Cells_3D]{style="color:green;"} ~ [Cells_2D + Cells_3D]{style="color:magenta;"}.
::: 

::::
:::::

## {{< bi file-earmark-spreadsheet>}} Wide and long table formats 
::::: {layout-ncol="2" layout-valign="center"}

:::: {#first-column}
::: {style="text-align: center;font-size: 60%"} 
![A typical wide-format data table, from Lewis (2024). DOI: 10.1201/9781032622835-3](images/Lewis_fig3-15.PNG){fig-align="left" width="600" height="300"}
:::
::::

:::: {#second-column}
::: {style="text-align: left;font-size: 65%"} 
In a table with [long format]{style="color:green;"} {{< bi file-earmark-person-fill>}} [Each subject]{style="text-decoration: underline;"} occupies [various rows]{style="color:green;"} and has its associated variables in [different rows:]{style="text-decoration: underline;"}    

[subject]{style="color:orange;"}(repeat), [Id1, Id2 ]{style="color:red;"}(repeat), [Time (1, 2 , 3)]{style="color:magenta;"}.
:::

::: {.callout-tip .smaller}
This format is useful when analyzing [time-lapse data]{style="color:green;"}, grouping different condition variables in a single column. [Example:]{style="text-decoration: underline;"}   

[Cells]{style="color:green;"} ~ [TimePoint (1D, 2D, 3D)]{style="color:magenta;"}. 

Long-format is usually more [efficient and suitable as a first choice]{style="color:green;"}.
::: 

::::
:::::

## {{< bi balloon-heart-fill>}} The best of all... {.center}  

You can use R and [Quarto](https://quarto.org/) (or Python) to convert from long to wide table format, or visceversa. Check this [tutorial]{style="color:blue;"}.   

::: {style="text-align: center;font-size: 60%"} 
![Long to wide format (https://tavareshugo.github.io/)](images/LongToWide.PNG){fig-align="center" width="600" height="350"}
:::


## {{< bi file-earmark-font-fill>}} Provide metadata (readme file){.smaller}   

Your tables are [unintelligible]{style="color:red;"} if they are not accompanied by metadata [describing the content]{style="color:green;"}. Desirable (open) formats for readme files: [.txt, .pdf, .md]{style="color:magenta;"} (markdown). 

::: {style="text-align: center;font-size: 90%"} 
![Example of a readme file](images/Dataset_readme.png){fig-align="center" width="600" height="400"}
:::

# Working with images

## {{< bi card-image>}} Principles of working with images{.center} 

::::: {layout-ncol="2" layout-valign="center"}

:::: {#first-column}
::: {style="text-align: center;font-size: 60%"} 
![Manrique-Castano et al. (2024). DOI: DOI 10.17605/OSF.IO/3VG8J](images/BrainStaining.png){fig-align="left" width="500" height="300"}
:::
::::

:::: {#second-column}
::: {style="text-align: center;font-size: 60%"}
- {{< bi card-image>}} When possible, convert [propietary files]{style="color:red;"} (i.e .czi) to [open formats]{style="color:green;"} with no compression (.tif).
- {{< bi code-square>}} Use [FIJI, Python]{style="color:green;"} or related [coding/scripting software]{style="color:green;"} (prefered) to document image transformations (resize. background substraction, etc.). 
- {{< bi code-square>}} Extract information/perform analysis using [coding/scripting software]{style="color:green;"} to ensure reproducibility. Please [avoid manual counts/analysis]{style="color:red;"}.
- {{< bi gear-fill>}} Share [technical]{style="color:green;"} (acquisition parameters) and [descriptive]{style="color:green;"} (context and content) [metadata]{style="color:green;"} along with the images.
:::
::::
:::::


## {{< bi card-image>}} Transform images to open formats 

::::: {layout-ncol="2" layout-valign="center"}

:::: {#first-column}
::: {style="text-align: center;font-size: 60%"} 
![Manrique-Castano et al. (2024). DOI: DOI 10.17605/OSF.IO/3VG8J](images/Transform_czi-tif.png){fig-align="left" width="500" height="300"}
:::
::::

:::: {#second-column}
You can easy transform your propietary files (.czi) to open formats (.tif) using i.e [FIJI]{style="color:red;"} [scripts]
::::
:::::
